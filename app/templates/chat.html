{% extends 'default_layout.html' %} {% block title %}AI Chat{% endblock %} {% block content %}
<!-- Chat Area -->
<div class="chat-area flex-1 flex overflow-hidden relative">
  <!-- Chat Container -->
  <div id="chat-container" class="flex-1 flex flex-col overflow-hidden transition-all duration-300">
    <!-- Messages Container -->
    <div id="messages-container" class="flex-1 overflow-y-auto p-6 pt-0 space-y-4">
      <div class="max-w-full mx-auto" id="messages-wrapper">
        <!-- Welcome message -->
        <div id="welcome-message" class="flex flex-col py-8">
          <!-- <div class="w-20 h-20 bg-gradient-to-br from-blue-100 to-white rounded-2xl flex items-center justify-center mb-6 shadow-md">
            <i class="fas fa-robot text-4xl text-blue-500"></i>
          </div> -->
          <!-- <h1 class="text-3xl font-bold mb-3 text-gray-800">${WELCOME_MESSAGE}</h1> -->
        </div>
      </div>
    </div>

    <!-- Input Area -->
    <div class="px-6 pb-6">
      <div class="max-w-full mx-auto bg-gray-100 py-3">
        <div class="max-w-full mx-auto input-container-wrapper">
          <div class="bg-gray-100 border border-gray-100 rounded-3xl shadow-sm overflow-hidden">
            <div class="bg-white p-4" style="height: 80px">
              <textarea id="chat-input" class="w-full bg-transparent border-none outline-none resize-none text-gray-800 placeholder-gray-400" rows="2" placeholder="データについて尋ねる新しい質問を入力してください..."></textarea>
            </div>
            <div class="bg-white px-6 pb-4 flex items-center gap-3">
              <button id="attach-btn" class="attach-btn" title="ドキュメントを添付"></button>
              <button id="report-btn" class="report-btn" title="レポート機能"></button>
              <div class="flex-1"></div>
              <button id="send-btn" class="send-btn">
                <i class="fas fa-paper-plane"></i>
                <span>送信</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- PDF Viewer -->
  <div id="pdf-viewer" class="pdf-viewer">
    <div class="pdf-resize-handle" id="pdf-resize-handle"></div>
    <div class="pdf-resize-overlay" id="pdf-resize-overlay"></div>
    <div class="bg-white px-0 py-2 flex items-center justify-between">
      <div class="font-semibold text-gray-800">参照ファイル</div>
      <div class="flex items-center gap-2">
        <button id="pdf-open-tab-btn" class="pdf-open-tab-btn w-8 h-8 rounded-full hover:bg-gray-100 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors" data-tippy-content="新しいタブで開く">
          <i class="fas fa-external-link-alt"></i>
        </button>
        <button id="pdf-fullscreen-btn" class="pdf-fullscreen-btn w-8 h-8 rounded-full hover:bg-gray-100 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors" data-tippy-content="全画面表示">
          <i class="fas fa-expand"></i>
        </button>
        <button id="pdf-close-btn" class="pdf-close-btn w-8 h-8 rounded-full hover:bg-gray-100 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors" data-tippy-content="近い">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
    <div class="pdf-container flex-1 overflow-hidden">
      <iframe id="pdf-iframe" class="w-full h-full" frameborder="0"></iframe>
    </div>
  </div>
</div>
{% endblock %} {% block extra_scripts %}
<script src="{{ request.scope['prefix'] }}/static/js/pdf-resizer.js"></script>
<script src="{{ request.scope['prefix'] }}/static/js/pdf-viewer.js"></script>
<script type="module" src="{{ request.scope['prefix'] }}/static/js/chat.js"></script>
{% endblock %}
